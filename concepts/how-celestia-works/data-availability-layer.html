<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Celestia的 数据可用性层 | Celestia 中文社区</title>
    <meta name="description" content="模块化区块链 Celestia 中文开发者社区，由 DevBase 和 OpenBuild 发起">
    <link rel="preload stylesheet" href="/assets/style.ebb5e4cd.css" as="style">
    
    <script type="module" src="/assets/app.aae601a7.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.9243664d.js">
    <link rel="modulepreload" href="/assets/chunks/theme.e0ac8523.js">
    <link rel="modulepreload" href="/assets/concepts_how-celestia-works_data-availability-layer.md.b47e3f83.lean.js">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6be51355><!--[--><!--]--><!--[--><span tabindex="-1" data-v-ae3e3f51></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-ae3e3f51> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6be51355 data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-faa4ef78><div class="container" data-v-faa4ef78><div class="title" data-v-faa4ef78><div class="VPNavBarTitle has-sidebar" data-v-faa4ef78 data-v-8bbac535><a class="title" href="/" data-v-8bbac535><!--[--><!--]--><!----><!--[-->Celestia 中文社区<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-faa4ef78><div class="curtain" data-v-faa4ef78></div><div class="content-body" data-v-faa4ef78><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-faa4ef78><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-faa4ef78 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-7f418b0f data-v-5e623618><!--[-->首页<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/concepts/how-celestia-works/introduction.html" tabindex="0" data-v-7f418b0f data-v-5e623618><!--[-->模块化101<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/nodes/overview.html" tabindex="0" data-v-7f418b0f data-v-5e623618><!--[-->运行节点<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/developers/overview.html" tabindex="0" data-v-7f418b0f data-v-5e623618><!--[-->开发文档<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/markdown-examples.html" tabindex="0" data-v-7f418b0f data-v-5e623618><!--[-->开发教程(soon)<!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-faa4ef78 data-v-f6a63727><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f6a63727 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-faa4ef78 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/devbasecom/celestia-cn.github.io" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-faa4ef78 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>Appearance</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/devbasecom/celestia-cn.github.io" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-faa4ef78 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-6be51355 data-v-5cfd5582><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-5cfd5582><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-5cfd5582><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-5cfd5582>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5cfd5582 data-v-d5bb9d56><button data-v-d5bb9d56>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-6be51355 data-v-845b8fc6><div class="curtain" data-v-845b8fc6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-845b8fc6><span class="visually-hidden" id="sidebar-aria-label" data-v-845b8fc6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 has-active" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>模块化101</h2><!----></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/concepts/how-celestia-works/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/concepts/how-celestia-works/monolithic-vs-modular.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>单体vs模块化区块链</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/concepts/how-celestia-works/data-availability-layer.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Celestia的 数据可用性层</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6be51355 data-v-3107c4ee><div class="VPDoc has-sidebar has-aside" data-v-3107c4ee data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-b0ff2abe><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _concepts_how-celestia-works_data-availability-layer" data-v-6b87e69f><div><h1 id="celestia的-数据可用性层" tabindex="-1">Celestia的 数据可用性层 <a class="header-anchor" href="#celestia的-数据可用性层" aria-label="Permalink to &quot;Celestia的 数据可用性层&quot;">​</a></h1><p>Celestia是一个数据可用性（DA）层，它提供了一个可扩展的解决方案来应对<a href="https://coinmarketcap.com/alexandria/article/what-is-data-availability" target="_blank" rel="noreferrer">数据可用性问题</a>。由于区块链网络无需许可的天然特性，一个数据可用性层需要给执行层和结算层提供一种信任最小化机制，以确认交易数据确实可用。</p><p>Celestia的数据可用性（DA）层有两个关键特性，分别是<a href="https://blog.celestia.org/celestia-mvp-release-data-availability-sampling-light-clients" target="_blank" rel="noreferrer">“数据可用性抽样”</a>（Data Availability Sampling，DAS）和<a href="https://github.com/celestiaorg/nmt" target="_blank" rel="noreferrer">“命名空间默克尔树”</a>（Namespaced Merkle trees，NMTs）。这两个特性都是新颖的区块链扩展性问题解决方案：DAS使轻节点能够在无需下载整个区块的情况下验证数据的可用性；NMTs使得Celestia上的执行层和结算层可以下载仅与它们相关的交易，而不必处理无关的交易数据，从而提高了整体性能和效率。</p><h2 id="数据可用性抽样-das" tabindex="-1">数据可用性抽样(DAS) <a class="header-anchor" href="#数据可用性抽样-das" aria-label="Permalink to &quot;数据可用性抽样(DAS)&quot;">​</a></h2><p>一般情况下，轻节点只下载包含区块数据的承诺（即默克尔根）的区块头部。</p><p>为了实现DAS（数据可用性抽样），Celestia使用了二维Reed-Solomon编码方案来对区块数据进行编码：每个区块数据被分割成k × k个块，排列成一个k × k的矩阵，并通过多次应用Reed-Solomon编码，将其扩展为一个2k × 2k的扩展矩阵，同时加入奇偶校验数据。</p><p>然后，针对扩展矩阵的行和列分别计算了4k个不同的Merkle根；而这些Merkle根的Merkle根被用作区块头部中的区块数据承诺。</p><p><img src="https://celestia-cn-1259776727.cos.ap-shanghai.myqcloud.com/doc/reed-solomon-encoding-5e807cd199f4aaac4cb0f9aef83446a4.png" alt="https://docs.celestia.org/assets/images/reed-solomon-encoding-5e807cd199f4aaac4cb0f9aef83446a4.png"></p><p>为了验证数据是否可用，Celestia轻节点对2k × 2k的数据块进行抽样。 每个轻节点会随机选择一组唯一的坐标，然后向全节点查询这些坐标处的数据块和对应的Merkle证明。如果轻节点对每个抽样查询都收到有效的响应，那么就能以<a href="https://github.com/celestiaorg/celestia-node/issues/805#issuecomment-1150081075" target="_blank" rel="noreferrer">高概率地保证</a>整个区块的数据是可用的。</p><p>另外，每个收到带有正确Merkle证明的数据块都会在网络中广播。因此，只要Celestia轻节点共同抽样足够的数据块（即至少k × k个唯一的数据块），那么诚实的全节点就能够通过这些数据块来完整地恢复整个区块的数据。</p><p>对于更多关于DAS的细节，请参阅<a href="https://arxiv.org/abs/1809.09044" target="_blank" rel="noreferrer">原始论文</a>。</p><h2 id="可拓展性" tabindex="-1">可拓展性 <a class="header-anchor" href="#可拓展性" aria-label="Permalink to &quot;可拓展性&quot;">​</a></h2><p>DAS使Celestia能够扩展数据可用性（DA）层。由于每个轻节点只对区块数据进行小样本抽样，因此DAS可以由资源有限的轻节点执行。网络中轻节点的数量越多，它们能够共同下载和存储的数据也就越多。</p><p>这意味着增加执行DAS的轻节点数量可以支持更大的区块（即包含更多交易），同时仍保持对资源有限的轻节点来说是可行的。然而，为了验证区块头部，Celestia轻节点需要下载4k个中间Merkle根。</p><p>对于一个区块数据大小为 $n^2$ 字节的情况，这意味着每个轻节点必须下载 O(n) 字节。因此，如果Celestia轻节点的带宽容量得到改进，那么将会对整个Celestia的数据可用性层（DA layer）的吞吐量产生二次效应（呈指数级 $n^2$ 的），即使得整个系统的性能大幅提升。</p><h2 id="错误生成扩展数据的欺诈证明" tabindex="-1">错误生成扩展数据的欺诈证明<a class="header-anchor" href="#错误生成扩展数据的欺诈证明" aria-label="Permalink to &quot;错误生成扩展数据&lt;!--incorrectly extended data --&gt;的欺诈证明&lt;!--Fraud proofs --&gt;&quot;">​</a></h2><p>使用二维Reed-Solomon编码方案后产生的结果，就是需要轻节点下载4k个中间Merkle根来验证区块头部，这会对带宽产生较大的负担。作为替代，DAS可以使用标准（即一维）Reed-Solomon编码来设计，其中原始数据被分割成k个块，并且加上k个额外的奇偶校验块。由于区块数据承诺是这2k个数据块的Merkle根，轻节点就不再需要下载O(n)字节来验证区块头部。</p><p>然而，使用标准Reed-Solomon编码的缺点在于处理恶意区块生产者。如果恶意区块生产者生成扩展数据时出现错误或篡改，轻节点可能无法正确验证区块的数据完整性，从而可能导致欺诈或错误的数据得以传播。</p><p>因为Celestia不需要共识（即区块生产者）的大多数是诚实的，来保证数据的可用性。因此，如果扩展数据是无效的，即使轻节点抽样了足够数量的唯一数据块（对于标准编码至少是k个，对于二维编码是k × k个），原始数据也可能无法恢复。</p><p>作为解决方案，错误生成扩展数据的欺诈证明使得轻节点可以拒绝包含无效扩展数据的区块。这些证明需要重新构建编码并验证不匹配之处。使用标准的Reed-Solomon编码，这意味着需要下载原始数据，即 $n^2$ 字节。而使用二维Reed-Solomon编码，只需要O(n)字节，因为仅需要验证扩展矩阵的一行或一列即可。</p><h2 id="命名空间-merkle-树-nmts" tabindex="-1">命名空间 Merkle 树(NMTs) <a class="header-anchor" href="#命名空间-merkle-树-nmts" aria-label="Permalink to &quot;命名空间 Merkle 树(NMTs)&quot;">​</a></h2><p>Celestia将区块数据分区为多个命名空间，每个应用程序（例如，rollup）都使用DA层。因此，每个应用程序只需要下载自己的数据，并可以忽略其他应用程序的数据。</p><p>为了实现这一点，DA层必须能够证明提供的数据是完整的，即返回了给定命名空间的所有数据。为此，Celestia使用了命名空间 Merkle 树 (NMTs)。</p><p>命名空间 Merkle 树 (NMTs) 是一种Merkle树，其叶子节点按命名空间标识符进行排序，并且哈希函数被修改，使得树中的每个节点都包含其所有子节点的命名空间范围。下图是一个示例，展示了一个高度为3（即八个数据块）的命名空间 Merkle 树。数据被分为三个命名空间。</p><p><img src="https://celestia-cn-1259776727.cos.ap-shanghai.myqcloud.com/doc/nmt-e0e70f4a26315a006b2c62bb3753fe4f.png" alt="https://docs.celestia.org/assets/images/nmt-e0e70f4a26315a006b2c62bb3753fe4f.png"></p><p>当一个应用程序请求命名空间2的数据时，DA层必须提供数据块D3、D4、D5和D6，以及节点N2、N8和N7作为证明（注意，应用程序已经有了来自区块头部的根节点N14）。</p><p>因此，应用程序能够检查所提供的数据是否是区块数据的一部分。此外，应用程序可以验证命名空间2的所有数据是否都被提供。如果DA层仅提供数据块D4和D5，它还必须提供节点N12和N11作为证明。然而，应用程序可以通过检查这两个节点的命名空间范围来识别数据是否不完整，即N12和N11都有属于命名空间2的子节点。</p><p>通过这种方式，应用程序可以验证所提供的数据是否完整，并确保它是属于所请求的特定命名空间的。这样的验证过程有助于确保数据的完整性和准确性，防止恶意行为或数据的篡改。</p><p>要了解更多关于命名空间 Merkle 树（NMTs）的细节，请查阅<a href="https://arxiv.org/abs/1905.09274" target="_blank" rel="noreferrer">原始论文</a>。</p><h2 id="构建da层的pos区块链" tabindex="-1">构建DA层的PoS区块链 <a class="header-anchor" href="#构建da层的pos区块链" aria-label="Permalink to &quot;构建DA层的PoS区块链&quot;">​</a></h2><h3 id="支持数据可用性" tabindex="-1">支持数据可用性 <a class="header-anchor" href="#支持数据可用性" aria-label="Permalink to &quot;支持数据可用性&quot;">​</a></h3><p>Celestia的DA层由一个PoS区块链构成。Celestia将这个区块链称作&quot;celestia-app&quot;，它是一个应用程序，用于提供交易以促进DA层，并且它是使用Cosmos SDK构建的。下图展示了&quot;celestia-app&quot;的主要组件。</p><p><img src="https://celestia-cn-1259776727.cos.ap-shanghai.myqcloud.com/doc/celestia-app-dade9feedac983fdbc5336fc713f2a3a.png" alt="https://docs.celestia.org/assets/images/celestia-app-dade9feedac983fdbc5336fc713f2a3a.png"></p><p>&quot;celestia-app&quot; 是建立在 &quot;celestia-core&quot; 之上的，&quot;celestia-core&quot; 是 <a href="https://arxiv.org/abs/1807.04938" target="_blank" rel="noreferrer">Tendermint共识算法</a> 的优化版本。与标准Tendermint共识算法相比，celestia-core进行了以下重要更改：</p><ul><li>实现了区块数据的纠删码编码（使用2维Reed-Solomon编码方案）。</li><li>将Tendermint中用于存储区块数据的常规Merkle树替换为<a href="https://github.com/celestiaorg/nmt" target="_blank" rel="noreferrer">命名空间Merkle树</a>，以实现上述层（即执行和结算层）只下载所需的数据（更多详情，请参阅下面描述用例的部分）。</li></ul><p>要了解有关对 Tendermint 的更改的更多详细信息，请查阅<a href="https://github.com/celestiaorg/celestia-core/tree/v0.34.x-celestia/docs/celestia-architecture" target="_blank" rel="noreferrer">ADRs（架构设计决策记录）</a>。值得注意的是，celestia-core节点仍然使用Tendermint的p2p网络。 与Tendermint类似，celestia-core通过<a href="https://github.com/tendermint/tendermint/tree/master/spec/abci%2B%2B" target="_blank" rel="noreferrer">ABCI++</a>与应用层（即状态机）相连接，ABCI++是<a href="https://github.com/tendermint/tendermint/tree/master/spec/abci" target="_blank" rel="noreferrer">ABCI（应用区块链接口）</a>的一个重要优化版。</p><p>celestia-app状态机是一个用于执行PoS逻辑和管理DA层的关键组件。它负责验证PoS共识和处理相关的区块数据。但是，需要注意的是，celestia-app是数据无关的，其本身不验证也不存储由celestia-app提供的具体数据，它只负责执行共识算法和处理交易，而实际的数据验证和存储是在celestia-core层进行的。</p></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-37656e44><!--[--><!--]--><!----><nav class="prev-next" data-v-37656e44><div class="pager" data-v-37656e44><a class="pager-link prev" href="/concepts/how-celestia-works/monolithic-vs-modular.html" data-v-37656e44><span class="desc" data-v-37656e44>Previous page</span><span class="title" data-v-37656e44>单体vs模块化区块链</span></a></div><div class="pager" data-v-37656e44><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"developers_optimism.md\":\"9ace6047\",\"developers_overview.md\":\"31a5f218\",\"developers_prompt-scavenger.md\":\"8edf71f0\",\"developers_rollkit.md\":\"997ddcc4\",\"lossary-translation.md\":\"8ea6ac86\",\"nodes_arabica-devnet.md\":\"7f4c24a8\",\"developers_deploy-on-bubs.md\":\"7bc9144c\",\"nodes_celestia-node.md\":\"40acbd51\",\"nodes_overview.md\":\"49508665\",\"developers_light-node-video.md\":\"568f8c7d\",\"index.md\":\"2ce6946d\",\"developers_node-api.md\":\"68f6fb07\",\"concepts_how-celestia-works_monolithic-vs-modular.md\":\"466ec51e\",\"developers_bubs-testnet.md\":\"c923eef2\",\"developers_intro-to-op-stack.md\":\"0ec25cb5\",\"jsx_demo.md\":\"d90d2d56\",\"concepts_how-celestia-works_data-availability-layer.md\":\"b47e3f83\",\"developers_celestia-app-vesting.md\":\"1226dfb4\",\"developers_optimism-devnet.md\":\"cbb3a391\",\"developers_celestia-app-wallet.md\":\"5c796a25\",\"developers_celestia-node-key.md\":\"0d861cec\",\"developers_full-stack-modular-development-guide.md\":\"6854da97\",\"developers_gm-portal-bubs.md\":\"54a678b9\",\"developers_ibc-relayer.md\":\"4f3e4ed6\",\"developers_integrate-celestia.md\":\"36e185e9\",\"developers_node-tutorial.md\":\"8a5effa8\",\"concepts_how-celestia-works_introduction.md\":\"f6e70041\",\"developers_readme.md\":\"fba8eb26\",\"developers_build-modular.md\":\"4784849b\",\"developers_keplr.md\":\"57b9fe99\",\"developers_demos.md\":\"e4d21278\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Celestia 中文社区\",\"description\":\"模块化区块链 Celestia 中文开发者社区，由 DevBase 和 OpenBuild 发起\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"模块化101\",\"link\":\"/concepts/how-celestia-works/introduction\"},{\"text\":\"运行节点\",\"link\":\"/nodes/overview\"},{\"text\":\"开发文档\",\"link\":\"/developers/overview\"},{\"text\":\"开发教程(soon)\",\"link\":\"/markdown-examples\"}],\"sidebar\":{\"/concepts/\":[{\"text\":\"模块化101\",\"items\":[{\"text\":\"介绍\",\"link\":\"/concepts/how-celestia-works/introduction\"},{\"text\":\"单体vs模块化区块链\",\"link\":\"/concepts/how-celestia-works/monolithic-vs-modular\"},{\"text\":\"Celestia的 数据可用性层\",\"link\":\"/concepts/how-celestia-works/data-availability-layer\"}]}],\"/nodes/\":[{\"items\":[{\"text\":\"概览\",\"link\":\"/nodes/overview\"}]},{\"text\":\"网络\",\"items\":[{\"text\":\"Arabica devnet\",\"link\":\"/nodes/arabica-devnet\"}]}],\"/developers/\":[{\"text\":\"概览\",\"link\":\"/developers/overview\"},{\"text\":\"构建模块化\",\"link\":\"/developers/build-modular\"},{\"collapsed\":false,\"text\":\"创建Celestia钱包\",\"items\":[{\"text\":\"Keplr集成\",\"link\":\"/developers/keplr\"},{\"collapsed\":false,\"text\":\"使用 celestia-app 创建钱包\",\"link\":\"/developers/celestia-app-wallet\",\"items\":[{\"text\":\"使用 celestia-app 创建权益账户\",\"link\":\"/developers/celestia-app-vesting\"}]},{\"text\":\"使用 Celestia 节点创建钱包\",\"link\":\"/developers/celestia-node-key\"}]},{\"collapsed\":false,\"text\":\"节点 API\",\"link\":\"/developers/node-api\",\"items\":[{\"text\":\"Celestia 节点 RPC CLI 教程\",\"link\":\"/developers/node-tutorial\"},{\"text\":\"Celestia 节点 API 文档\",\"link\":\"https://node-rpc-docs.celestia.org/\"},{\"collapsed\":false,\"text\":\"网关 API\",\"items\":[{\"collapsed\":false,\"text\":\"GPT \\\"提示\\\"猎人\",\"link\":\"/developers/prompt-scavenger\"}]}]},{\"collapsed\":false,\"text\":\"部署 Rollup\",\"link\":\"/developers/node-api\",\"items\":[{\"text\":\"Rollkit\",\"link\":\"/developers/rollkit\"},{\"collapsed\":false,\"text\":\"Optimism\",\"items\":[{\"text\":\"OP Stack 集成简介\",\"link\":\"/developers/intro-to-op-stack\"},{\"text\":\"Bub 测试网\",\"link\":\"/developers/bubs-testnet\"},{\"text\":\"基于 Bub 测试网部署智能合约\",\"link\":\"/developers/deploy-on-bubs\"},{\"text\":\"基于 Bub 测试网部署一个 DApp\",\"link\":\"/developers/gm-portal-bubs\"},{\"text\":\"使用 thirdweb 部署一个 DApp\",\"link\":\"https://thirdweb.com/bubs-testnet\"},{\"text\":\"部署一个 OP Stack 开发网\",\"link\":\"/developers/optimism-devnet\"},{\"text\":\"基于 Celestia 部署一个 OP Stack 测试网\",\"link\":\"/developers/optimism\"},{\"collapsed\":false,\"text\":\"Rollups 即服务\",\"items\":[{\"text\":\"Caldera\",\"link\":\"https://caldera.xyz/\"}]}]},{\"text\":\"全栈模块化区块链开发指南\",\"link\":\"/developers/full-stack-modular-development-guide\"},{\"text\":\"IBC Relaying 指南\",\"link\":\"/developers/ibc-relayer\"},{\"text\":\"Sovereign SDK\",\"link\":\"https://github.com/Sovereign-Labs/sovereign-sdk/tree/main/examples/demo-rollup#demo-rollup\"},{\"text\":\"Dymension\",\"link\":\"https://dymension.xyz\"}]},{\"text\":\"Celestia 开发案例展示\",\"link\":\"/developers/demos\"},{\"text\":\"Celestia 集成\",\"link\":\"/developers/integrate-celestia\"}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/devbasecom/celestia-cn.github.io\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>