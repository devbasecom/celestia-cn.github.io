import{_ as s,o as a,c as n,S as l}from"./chunks/framework.a76ee0a9.js";const F=JSON.parse('{"title":"在 Bubs testnet 上部署智能合约","description":"","frontmatter":{},"headers":[],"relativePath":"developers/deploy-on-bubs.md","filePath":"developers/deploy-on-bubs.md"}'),p={name:"developers/deploy-on-bubs.md"},o=l(`<h1 id="在-bubs-testnet-上部署智能合约" tabindex="-1">在 Bubs testnet 上部署智能合约 <a class="header-anchor" href="#在-bubs-testnet-上部署智能合约" aria-label="Permalink to &quot;在 Bubs testnet 上部署智能合约&quot;">​</a></h1><p>在本教程中，我们会在 Bubs testnet 上部署一个智能合约。</p><h2 id="依赖项" tabindex="-1">依赖项 <a class="header-anchor" href="#依赖项" aria-label="Permalink to &quot;依赖项&quot;">​</a></h2><ul><li>在你的机器上安装<a href="https://getfoundry.sh/" target="_blank" rel="noreferrer">Foundry</a></li><li><a href="https://nodejs.org/en" target="_blank" rel="noreferrer">Node.js</a></li><li>对 Ethereum 的基本了解</li><li>对 Solidity 和 Node.js 的基本了解</li><li>从 <a href="https://bubsfaucet.com/" target="_blank" rel="noreferrer">Bubs faucet</a> 获取 Bubs ETH</li><li>从<a href="./bubs-testnet.html">Bubs testnet 页面</a>获取 Bubs RPC URL</li></ul><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><p>首先，在<code>$HOME</code>目录创建一个新的项目文件夹并且通过 npm 进行初始化。</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> $HOME</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">counter-project</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">counter-project</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-y</span></span></code></pre></div><p>然后，通过下列命令初始化一个 Foundry 项目</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">forge</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">init</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">counter_contract</span></span></code></pre></div><h2 id="创建智能合约" tabindex="-1">创建智能合约 <a class="header-anchor" href="#创建智能合约" aria-label="Permalink to &quot;创建智能合约&quot;">​</a></h2><p>查看<code>counter-project/counter_contract/src/Counter.sol</code>。</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">solidity</span><span style="color:#A6ACCD;"> ^0.8.13</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">contract</span><span style="color:#FFCB6B;"> Counter</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> number</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setNumber</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">newNumber</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        number </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> newNumber</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">increment</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        number</span><span style="color:#89DDFF;">++;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>合约包含一个名为&quot;number&quot;的公共无符号整数变量。该合约中有两个公共函数。<code>setNumber</code>函数允许任何人为&quot;number&quot;变量设置新值，而<code>increment</code>函数在每次调用时将&quot;number&quot;的值增加<code>1</code>。</p><p>您可以在<a href="https://ethereum.org/en/developers/learning-tools/" target="_blank" rel="noreferrer">此处</a>了解更多关于 Solidity 和智能合约编程的信息。</p><p>要编译该合约，请从<code>$HOME/counter-project/counter_contract/</code>目录运行以下 forge 命令。</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">forge</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">build</span></span></code></pre></div><p>输出如下:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">⠢</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Compiling...</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">⠔</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Compiling 21 files with 0.8.19</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">⠑</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Solc 0.8.19 finished </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> 1.24s</span></span>
<span class="line"><span style="color:#FFCB6B;">Compiler</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">successful</span></span></code></pre></div><h2 id="测试你的智能合约" tabindex="-1">测试你的智能合约 <a class="header-anchor" href="#测试你的智能合约" aria-label="Permalink to &quot;测试你的智能合约&quot;">​</a></h2><p>打开<code>test/Counter.sol</code>文件：</p><div class="language-solidity"><button title="Copy Code" class="copy"></button><span class="lang">solidity</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// SPDX-License-Identifier: UNLICENSED</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">pragma</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">solidity</span><span style="color:#A6ACCD;"> ^0.8.13</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&quot;forge-std/Test.sol&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&quot;../src/Counter.sol&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">contract</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CounterTest</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Test</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    Counter </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> counter</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">setUp</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        counter </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Counter</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        counter</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setNumber</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">testIncrement</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        counter</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">increment</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">assertEq</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">counter</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">number</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">testSetNumber</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint256</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        counter</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setNumber</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">assertEq</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">counter</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">number</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>这个文件对我们在前面部分创建的合约进行单元测试。以下是测试的内容：</p><p>合约中包含一个名为&quot;counter&quot;的公共&quot;Counter&quot;类型变量。在 <code>setUp</code> 函数中，它初始化了&quot;Counter&quot;合约的新实例，并将&quot;number&quot;变量设置为 0。</p><p>合约中有两个测试函数：<code>testIncrement</code> 和 <code>testSetNumber</code>。</p><p><code>testIncrement</code> 函数通过调用&quot;Counter&quot;合约的&quot;increment&quot;函数进行测试，并断言&quot;Counter&quot;合约中的&quot;number&quot;为 1。这验证了&quot;increment&quot;操作是否正确将数字增加一。</p><p><code>testSetNumber</code> 函数更加通用化。它接受一个无符号整数参数&#39;x&#39;，并测试&quot;Counter&quot;合约的&quot;setNumber&quot;函数。在使用&#39;x&#39;调用&quot;setNumber&quot;函数后，它断言&quot;Counter&quot;合约中的&quot;number&quot;等于&#39;x&#39;。这验证了&quot;setNumber&quot;函数是否正确更新了&quot;Counter&quot;合约中的&quot;number&quot;。</p><p>运行下列命令运行你的测试:</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">forge</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span></span></code></pre></div><p>如果测试通过的话，输出应该与以下类似：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">⠆</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Compiling...</span></span>
<span class="line"><span style="color:#FFCB6B;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">files</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">changed,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">compilation</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">skipped</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Running</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test/Counter.t.sol:CounterTest</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">PASS</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">testIncrement</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">gas:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">28334</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">PASS</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> testSetNumber</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">uint256</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">runs:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">256</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">μ:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">27709</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">28409</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">Test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">result:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ok.</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passed</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">finished</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8.96</span><span style="color:#C3E88D;">ms</span></span></code></pre></div><h2 id="部署你的智能合约" tabindex="-1">部署你的智能合约 <a class="header-anchor" href="#部署你的智能合约" aria-label="Permalink to &quot;部署你的智能合约&quot;">​</a></h2><h3 id="使用-anvil" tabindex="-1">使用 Anvil <a class="header-anchor" href="#使用-anvil" aria-label="Permalink to &quot;使用 Anvil&quot;">​</a></h3><p>首先，我们将在名为&quot;anvil&quot;的本地开发网络上测试合约。要启动本地服务器，请运行以下命令：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">anvil</span></span></code></pre></div><p>您将看到一个本地的 RPC 端口 (127.0.0.1:8545) 和用于测试的账户。</p><p>现在让我们部署合约。首先，从&quot;anvil&quot;设置一个私钥：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> PRIVATE_KEY</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> ANVIL_RPC_URL</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">http://localhost:8545</span></span></code></pre></div><p>现在，部署合约：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">forge</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--rpc-url</span><span style="color:#A6ACCD;"> $ANVIL_RPC_URL \\</span></span>
<span class="line"><span style="color:#A6ACCD;">--private-key $PRIVATE_KEY \\</span></span>
<span class="line"><span style="color:#A6ACCD;">src/Counter.sol:Counter</span></span></code></pre></div><h3 id="使用-bubs" tabindex="-1">使用 Bubs <a class="header-anchor" href="#使用-bubs" aria-label="Permalink to &quot;使用 Bubs&quot;">​</a></h3><p>首先，从您资金充足的以太坊钱包中设置一个私钥，并使用您选择的 RPC 设置 BUBS_RPC_URL 变量：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> BUBS_PRIVATE_KEY</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> BUBS_RPC_URL</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">https://bubs.calderachain.xyz/http</span></span></code></pre></div><p>现在我们准备将智能合约部署到 Bubs 上，我们将运行 <code>forge create</code> 命令。</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">forge</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--rpc-url</span><span style="color:#A6ACCD;"> $BUBS_RPC_URL \\</span></span>
<span class="line"><span style="color:#A6ACCD;">--private-key $BUBS_PRIVATE_KEY \\</span></span>
<span class="line"><span style="color:#A6ACCD;">src/Counter.sol:Counter</span></span></code></pre></div><p>如果部署成功的话输出与以下类似：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">⠆</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> Compiling...</span></span>
<span class="line"><span style="color:#FFCB6B;">No</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">files</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">changed,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">compilation</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">skipped</span></span>
<span class="line"><span style="color:#FFCB6B;">Deployer:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266</span></span>
<span class="line"><span style="color:#FFCB6B;">Deployed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">to:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0x5FbDB2315678afecb367f032d93F642f64180aa3</span></span>
<span class="line"><span style="color:#FFCB6B;">Transaction</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">hash:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xf1a793a793cd9fc588f5132d99008565ea361eb3535d66499575e9e1908200b2</span></span></code></pre></div><p>一旦您部署了合约，您就可以与它进行交互了！</p><p>首先，我们将将其设置为一个变量：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> CONTRACT_ADDRESS</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">0x5FbDB2315678afecb367f032d93F642f64180aa3</span></span></code></pre></div><h2 id="与你的合约进行交互" tabindex="-1">与你的合约进行交互 <a class="header-anchor" href="#与你的合约进行交互" aria-label="Permalink to &quot;与你的合约进行交互&quot;">​</a></h2><p>Foundry 使用 <code>cast</code> 作为执行以太坊 RPC 调用的命令行界面（CLI）工具。</p><p>为了向合约写入数据，我们将使用 <code>cast send</code> 命令：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cast</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">send</span><span style="color:#A6ACCD;"> $CONTRACT_ADDRESS </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">setNumber(uint256)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--rpc-url</span><span style="color:#A6ACCD;"> $BUBS_RPC_URL </span><span style="color:#C3E88D;">--private-key</span><span style="color:#A6ACCD;"> $PRIVATE_KEY</span></span></code></pre></div><p>输出应该与以下类似：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">blockHash</span><span style="color:#A6ACCD;">               </span><span style="color:#F78C6C;">0x131822bef6eb59656d7e1387c19b75be667e587006710365ec5cf58030786c42</span></span>
<span class="line"><span style="color:#FFCB6B;">blockNumber</span><span style="color:#A6ACCD;">             </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#FFCB6B;">contractAddress</span></span>
<span class="line"><span style="color:#FFCB6B;">cumulativeGasUsed</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">43494</span></span>
<span class="line"><span style="color:#FFCB6B;">effectiveGasPrice</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">3767182372</span></span>
<span class="line"><span style="color:#FFCB6B;">gasUsed</span><span style="color:#A6ACCD;">                 </span><span style="color:#F78C6C;">43494</span></span>
<span class="line"><span style="color:#FFCB6B;">logs</span><span style="color:#A6ACCD;">                    []</span></span>
<span class="line"><span style="color:#FFCB6B;">logsBloom</span><span style="color:#A6ACCD;">               </span><span style="color:#F78C6C;">0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span></span>
<span class="line"><span style="color:#FFCB6B;">root</span></span>
<span class="line"><span style="color:#FFCB6B;">status</span><span style="color:#A6ACCD;">                  </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#FFCB6B;">transactionHash</span><span style="color:#A6ACCD;">         </span><span style="color:#F78C6C;">0x8f15d6004598f0662dd673a9898dceef77be8cc28408cecc284b28d7be32307d</span></span>
<span class="line"><span style="color:#FFCB6B;">transactionIndex</span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#82AAFF;">type</span><span style="color:#A6ACCD;">                    </span><span style="color:#F78C6C;">2</span></span></code></pre></div><p>现在，我们可以使用 cast call 命令进行读取调用，以查看 number 变量的状态：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">cast</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">call</span><span style="color:#A6ACCD;"> $CONTRACT_ADDRESS </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">number()</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--rpc-url</span><span style="color:#A6ACCD;"> $BUBS_RPC_URL</span></span></code></pre></div><p>结果将会类似：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">0x000000000000000000000000000000000000000000000000000000000000000a</span></span></code></pre></div><p>使用以下方法将结果从十六进制转换为十进制值：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">$((</span><span style="color:#F78C6C;">0x000000000000000000000000000000000000000000000000000000000000000a</span><span style="color:#89DDFF;">))</span></span></code></pre></div><h2 id="下一步" tabindex="-1">下一步 <a class="header-anchor" href="#下一步" aria-label="Permalink to &quot;下一步&quot;">​</a></h2><p>恭喜您！您已经学会了如何将智能合约部署到 Bubs 测试网络。</p><p>接下来您打算构建什么？现在，您已经可以开始学习 <a href="./gm-portal-bubs.html">GM Portal 教程</a>。</p>`,64),e=[o];function t(c,r,C,y,i,D){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{F as __pageData,u as default};
